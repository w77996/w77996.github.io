(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{203:function(s,n,a){"use strict";a.r(n);var e=a(0),t=Object(e.a)({},function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"python实现云之家自动签到"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#python实现云之家自动签到","aria-hidden":"true"}},[s._v("#")]),s._v(" Python实现云之家自动签到")]),s._v(" "),a("h3",{attrs:{id:"起因"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#起因","aria-hidden":"true"}},[s._v("#")]),s._v(" 起因")]),s._v(" "),a("p",[s._v("偶然看到一个同事设置闹钟，提醒自己下班打开。就突发奇想，既然身为后台开发是不是可以用程序来实现自动打卡的功能呢？\n于是开起来fiddler进行抓包，发现设置代理，云之家无法进行签到功能。既然电脑无法进行代理，那我直接在手机上开启个代理应用进行抓包不就行了么？")]),s._v(" "),a("h3",{attrs:{id:"接口分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#接口分析","aria-hidden":"true"}},[s._v("#")]),s._v(" 接口分析")]),s._v(" "),a("p",[s._v("最后抓到的结果签到接口")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://github.com/w77996/BlogsImage/blob/master/python_yunzhijia/1565155502.jpg?raw=true",alt:"image"}})]),s._v(" "),a("p",[s._v("分析下接口")]),s._v(" "),a("ul",[a("li",[s._v("域名："),a("code",[s._v("www.yunzhijia.com")])]),s._v(" "),a("li",[s._v("接口："),a("code",[s._v("/attendance-signapi/signservice/sign/signIn h2")])]),s._v(" "),a("li",[s._v("请求方式："),a("code",[s._v("POST")])]),s._v(" "),a("li",[s._v("请求参数"),a("br"),s._v(" "),a("code",[s._v("lng=纬度&lat=精度&bssid=&configId=配置ID&networkId=网络ID&userId=用户ID&ssid=")])]),s._v(" "),a("li",[s._v("请求头部"),a("br"),s._v("\n1.user-agent"),a("br"),s._v("\n2.opentoken"),a("br"),s._v("\n3.authorization"),a("br"),s._v("\n4.content-type"),a("br"),s._v("\n5.accept-language")])]),s._v(" "),a("p",[s._v("试着请求了一下\n"),a("img",{attrs:{src:"https://raw.githubusercontent.com/w77996/BlogsImage/master/python_yunzhijia/1565156178.jpg",alt:"image"}})]),s._v(" "),a("h3",{attrs:{id:"编码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编码","aria-hidden":"true"}},[s._v("#")]),s._v(" 编码")]),s._v(" "),a("p",[s._v("试了一下将获取的接口直接请求，云之家并没有对token的时间进行限制，所以拿到请求参数后可以直接撸代码了。\n考虑了一下java代码的繁重，最后决定用python来完成自动签到的功能。\n本来还用vue+axios写了一个网页版，但是后面发现axios总是会发送一个option请求导致返回错误，最后就没有去实现了。")]),s._v(" "),a("p",[s._v("python主要用到了三个库:")]),s._v(" "),a("ul",[a("li",[s._v("requests")]),s._v(" "),a("li",[s._v("json")]),s._v(" "),a("li",[s._v("apscheduler")])]),s._v(" "),a("p",[s._v("apscheduler作为定时器实现自动签到的功能")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('import requests\nimport json\nfrom apscheduler.schedulers.blocking import BlockingScheduler\n\n\n# 簽到\ndef sign_in():\n    url = " http://www.yunzhijia.com/attendance-signapi/signservice/sign/signIn?lng=&bssid=&configId=&networkId=&userId=&ssid=&lat="\n    headers = {\n        "user-agent": "",\n        "opentoken": "",\n        "authorization": "",\n        "accept-language":"",\n    }\n\n    response = requests.post(url, headers=headers)\n    print(response.text)\n    response_json = json.loads(response.text)\n    print(response_json[\'success\'])\n\n\n\ndef job():\n    sched = BlockingScheduler()\n    sched.add_job(sign_in, \'cron\', hour=18, minute=0)\n    sched.add_job(sign_in, \'cron\', hour=9, minute=0)\n    sched.start()\n\n\nif __name__ == \'__main__\':\n    job()\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br")])]),a("h3",{attrs:{id:"结尾"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#结尾","aria-hidden":"true"}},[s._v("#")]),s._v(" 结尾")]),s._v(" "),a("p",[s._v("此代码仅供学习用，我自己写完这个代码后也没有用过，平时也是准点上下班，希望大家不要随意使用，如有侵权问题请联系，随时删除。")])])},[],!1,null,null,null);n.default=t.exports}}]);